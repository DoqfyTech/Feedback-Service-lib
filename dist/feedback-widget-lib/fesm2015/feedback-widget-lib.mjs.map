{"version":3,"file":"feedback-widget-lib.mjs","sources":["../../../projects/feedback-widget-lib/src/lib/feedback-widget-lib.service.ts","../../../projects/feedback-widget-lib/src/lib/feedback-widget-lib.component.ts","../../../projects/feedback-widget-lib/src/lib/feedback-widget-lib.module.ts","../../../projects/feedback-widget-lib/src/public-api.ts","../../../projects/feedback-widget-lib/src/feedback-widget-lib.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class FeedbackWidgetLibService {\n  private widgetScriptId: string = 'feedback-widget';\n  private isLoaded: boolean = false;\n\n  constructor() {}\n\n  private init(userEmail: string): void {\n    const widget = (window as any).FeedbackWidget;\n    if (widget && typeof widget.init === 'function') {\n      widget.init({ user: userEmail });\n    }\n  }\n\n  load(userEmail: string): Promise<void> {\n    return new Promise((resolve, reject) => {\n      if (this.isLoaded) {\n        this.init(userEmail);\n        resolve();\n        return;\n      }\n\n      const script = document.createElement('script');\n      script.id = this.widgetScriptId;\n      script.src = 'assets/feedback-widget.js';\n      script.onload = () => {\n        this.init(userEmail);\n        this.isLoaded = true;\n        resolve();\n      };\n      script.onerror = () => reject('Failed to load widget script');\n      document.body.appendChild(script);\n    });\n  }\n\n  unload(): void{\n    const widget = (window as any).FeedbackWidget;\n    if(widget && typeof widget.destroy === 'function'){\n      widget.destroy()\n    }\n\n    document.getElementById(this.widgetScriptId)?.remove();\n    document.querySelector('.feedback-btn')?.remove();\n    document.querySelector('.feedback-modal')?.remove();\n    document.querySelector('.feedback-modal-backdrop')?.remove();\n\n    this.isLoaded = false;\n  }\n}\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'lib-feedback-widget-lib',\n  template: `\n    <p>\n      feedback-widget-lib works!\n    </p>\n  `,\n  styles: [\n  ]\n})\nexport class FeedbackWidgetLibComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { FeedbackWidgetLibComponent } from './feedback-widget-lib.component';\n\n\n\n@NgModule({\n  declarations: [\n    FeedbackWidgetLibComponent\n  ],\n  imports: [\n  ],\n  exports: [\n    FeedbackWidgetLibComponent\n  ]\n})\nexport class FeedbackWidgetLibModule { }\n","/*\n * Public API Surface of feedback-widget-lib\n */\n\nexport * from './lib/feedback-widget-lib.service';\nexport * from './lib/feedback-widget-lib.component';\nexport * from './lib/feedback-widget-lib.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":"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"}